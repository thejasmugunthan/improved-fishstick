<!-- Wrapper Container -->
<div class="container">
  <!-- Sidebar -->
  <div class="sidebar">
    <h2>InternLink</h2>
    <a href='/home'>🏠 Dashboard</a>
    <a href="/resume">📄 My Resume</a>
    <a href='/jlist'>💼 Job Listings</a>
    <a href='/settings'>⚙️ Settings</a>
    <a href='/profile'>👤 Profile</a>
    <a href='/dashboard'>📕 Logout</a>
  </div>

  <!-- Main Content -->
  <div class="main">
    <h1>🔍 Find Jobs by Your Skills</h1>

    <!-- Skill Input Form -->
    <div class="skill-form">
      <div class="field">
        <label>Skill 1 </label>
        <div class="priority-filter">
        <select  [(ngModel)]="skill1">
            <option value="">Highest Priority</option>
            <option value="HTML">HTML</option>
            <option value="CSS">CSS</option>
            <option value="JavaScript">JavaScript</option>
            <option value="Angular">Angular</option>
            <option value="React">React</option>
            <option value="Java">Java</option>
            <option value="Marketing">Marketing</option>
            <option value="Teaching">Teaching</option>
          </select>
        </div>
      </div>
      <div class="field">
        <label> Skill 2</label>
        <div class="priority-filter">
        <select  [(ngModel)]="skill2">
            <option value="">Medium Priority</option>
            <option value="HTML">HTML</option>
            <option value="CSS">CSS</option>
            <option value="JavaScript">JavaScript</option>
            <option value="Angular">Angular</option>
            <option value="React">React</option>
            <option value="Java">Java</option>
            <option value="Marketing">Marketing</option>
            <option value="Teaching">Teaching</option>
          </select>
        </div>
      </div>
      <div class="field">
        <label>Skill 3</label>
        <div class="priority-filter">
         <select  [(ngModel)]="skill3">
            <option value="">Low Priority</option>
            <option value="HTML">HTML</option>
            <option value="CSS">CSS</option>
            <option value="JavaScript">JavaScript</option>
            <option value="Angular">Angular</option>
            <option value="React">React</option>
            <option value="Java">Java</option>
            <option value="Marketing">Marketing</option>
            <option value="Teaching">Teaching</option>
          </select>
          </div>
      </div>
      <button (click)="applySkillBasedPriority()">🔁 Sort by Skills</button>
    </div>

    <!-- Priority Filter Dropdown -->
    <div class="priority-filter" *ngIf="sortedJobs.length > 0">
      <label>🎯 Filter by Priority:</label>
      <select [(ngModel)]="selectedPriority" (change)="filterByPriority()">
        <option value="">All</option>
        <option *ngFor="let p of [1,2,3,4]" [value]="p">Priority {{ p }}</option>
      </select>
    </div>

    <!-- Job Cards Display -->
    <div class="job-grid">
      <div class="job-card" *ngFor="let job of sortedJobs" [ngClass]="'priority-'+job.priority">
        <div class="job-header">
          <h2>{{ job.title }}</h2>
          <span class="priority-badge">P{{ job.priority }}</span>
        </div>
        <p><strong>Company:</strong> {{ job.company }}</p>
        <p><strong>Location:</strong> {{ job.location }}</p>
        <p><strong>Type:</strong> {{ job.type }}</p>
        <p><strong>Skills:</strong>
          <span *ngFor="let skill of job.skills.split(',')" class="skill-chip">{{ skill.trim() }}</span>
        </p>
        <p><strong>Posted:</strong> {{ job.posted_at | date:'short' }}</p>
        <button class="view-btn">🔗 View Details</button>
      </div>
    </div>

    <div *ngIf="!loading && sortedJobs.length === 0">
      <p class="empty-msg">😔 No jobs match your skill preferences.</p>
    </div>
  </div>
</div>
